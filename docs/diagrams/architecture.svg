<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 920 620" width="920" height="620">
  <style>
    .title { font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; }
    .label { font-family: Arial, sans-serif; font-size: 14px; }
    .small { font-family: Arial, sans-serif; font-size: 13px; }
    .tiny { font-family: Arial, sans-serif; font-size: 12px; }
  </style>

  <!-- Background -->
  <rect width="920" height="620" fill="#ffffff"/>

  <!-- Arrow marker definitions -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#1e1e1e"/>
    </marker>
  </defs>

  <!-- Agent Box -->
  <rect x="380" y="20" width="200" height="80" rx="8" fill="#a5d8ff" stroke="#1971c2" stroke-width="2"/>
  <text x="480" y="50" text-anchor="middle" class="title" fill="#1e1e1e">Agent</text>
  <text x="480" y="75" text-anchor="middle" class="label" fill="#1e1e1e">(OpenAI Agents SDK)</text>

  <!-- stdio arrow -->
  <line x1="480" y1="100" x2="480" y2="150" stroke="#1e1e1e" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="500" y="130" class="tiny" fill="#495057">stdio</text>

  <!-- MCP Server Container -->
  <rect x="40" y="160" width="840" height="300" rx="8" fill="#b2f2bb" stroke="#2f9e44" stroke-width="2"/>
  <text x="460" y="185" text-anchor="middle" class="title" fill="#1e1e1e">MCP Server (prd_decomposer)</text>

  <!-- read_file tool -->
  <rect x="60" y="210" width="110" height="50" rx="6" fill="#dee2e6" stroke="#495057" stroke-width="2"/>
  <text x="115" y="240" text-anchor="middle" class="label" fill="#1e1e1e">read_file</text>

  <!-- analyze_prd tool -->
  <rect x="200" y="210" width="130" height="50" rx="6" fill="#d0bfff" stroke="#7048e8" stroke-width="2"/>
  <text x="265" y="240" text-anchor="middle" class="label" fill="#1e1e1e">analyze_prd</text>

  <!-- decompose_to_tickets tool -->
  <rect x="360" y="210" width="130" height="50" rx="6" fill="#d0bfff" stroke="#7048e8" stroke-width="2"/>
  <text x="425" y="232" text-anchor="middle" class="label" fill="#1e1e1e">decompose_</text>
  <text x="425" y="250" text-anchor="middle" class="label" fill="#1e1e1e">to_tickets</text>

  <!-- export_tickets tool -->
  <rect x="520" y="210" width="130" height="50" rx="6" fill="#dee2e6" stroke="#495057" stroke-width="2"/>
  <text x="585" y="240" text-anchor="middle" class="label" fill="#1e1e1e">export_tickets</text>

  <!-- health_check tool -->
  <rect x="680" y="210" width="120" height="50" rx="6" fill="#dee2e6" stroke="#495057" stroke-width="2"/>
  <text x="740" y="240" text-anchor="middle" class="label" fill="#1e1e1e">health_check</text>

  <!-- Arrows from tools -->
  <line x1="115" y1="260" x2="115" y2="310" stroke="#1e1e1e" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="265" y1="260" x2="265" y2="310" stroke="#1e1e1e" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="425" y1="260" x2="425" y2="310" stroke="#1e1e1e" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="585" y1="260" x2="585" y2="310" stroke="#1e1e1e" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="740" y1="260" x2="740" y2="310" stroke="#1e1e1e" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Filesystem box -->
  <rect x="60" y="320" width="110" height="50" rx="6" fill="#dee2e6" stroke="#495057" stroke-width="2"/>
  <text x="115" y="350" text-anchor="middle" class="label" fill="#1e1e1e">Filesystem</text>

  <!-- GPT-4o box (shared) -->
  <rect x="200" y="320" width="260" height="50" rx="6" fill="#ffec99" stroke="#f08c00" stroke-width="2"/>
  <text x="330" y="350" text-anchor="middle" class="label" fill="#1e1e1e">GPT-4o (OpenAI)</text>

  <!-- Export formats box -->
  <rect x="500" y="320" width="170" height="50" rx="6" fill="#dee2e6" stroke="#495057" stroke-width="2"/>
  <text x="585" y="350" text-anchor="middle" class="label" fill="#1e1e1e">CSV / Jira / YAML</text>

  <!-- Status box -->
  <rect x="700" y="320" width="80" height="50" rx="6" fill="#dee2e6" stroke="#495057" stroke-width="2"/>
  <text x="740" y="350" text-anchor="middle" class="label" fill="#1e1e1e">Status</text>

  <!-- Data Flow label -->
  <text x="460" y="420" text-anchor="middle" class="title" fill="#1e1e1e">Data Flow</text>

  <!-- Data flow boxes -->
  <rect x="40" y="450" width="140" height="70" rx="6" fill="#ffc9c9" stroke="#e03131" stroke-width="2"/>
  <text x="110" y="480" text-anchor="middle" class="label" fill="#1e1e1e">PRD Input</text>
  <text x="110" y="500" text-anchor="middle" class="small" fill="#1e1e1e">(markdown)</text>

  <rect x="240" y="450" width="180" height="70" rx="6" fill="#a5d8ff" stroke="#1971c2" stroke-width="2"/>
  <text x="330" y="475" text-anchor="middle" class="small" fill="#1e1e1e">StructuredRequirements</text>
  <text x="330" y="500" text-anchor="middle" class="small" fill="#1e1e1e">(Pydantic)</text>

  <rect x="480" y="450" width="160" height="70" rx="6" fill="#b2f2bb" stroke="#2f9e44" stroke-width="2"/>
  <text x="560" y="480" text-anchor="middle" class="small" fill="#1e1e1e">TicketCollection</text>
  <text x="560" y="500" text-anchor="middle" class="small" fill="#1e1e1e">(Epics + Stories)</text>

  <rect x="700" y="450" width="160" height="70" rx="6" fill="#dee2e6" stroke="#495057" stroke-width="2"/>
  <text x="780" y="480" text-anchor="middle" class="small" fill="#1e1e1e">Export Formats</text>
  <text x="780" y="500" text-anchor="middle" class="small" fill="#1e1e1e">(CSV/Jira/YAML)</text>

  <!-- Data flow arrows -->
  <line x1="180" y1="485" x2="230" y2="485" stroke="#1e1e1e" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="420" y1="485" x2="470" y2="485" stroke="#1e1e1e" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="640" y1="485" x2="690" y2="485" stroke="#1e1e1e" stroke-width="2" marker-end="url(#arrowhead)"/>
</svg>
